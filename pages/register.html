<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registration - Infinity 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../public/styles/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .floating-navbar {
            position: fixed;
            top: 1rem;
            left: 50%;
            transform: translateX(-50%);
            width: 95%;
            max-width: 1280px;
            z-index: 100;
            border-radius: 1rem;
            animation: navbarFloat 2s ease-in-out infinite alternate;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        @keyframes navbarFloat {
            from {
                transform: translateX(-50%) translateY(0px);
            }
            to {
                transform: translateX(-50%) translateY(5px);
            }
        }
        
        .glass-effect {
            border-radius: 1rem;
        }
        
        /* Button Styles */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.5rem 1rem;
            font-weight: 500;
            border-radius: 0.375rem;
            transition: all 0.2s;
            cursor: pointer;
        }
        
        .btn-primary {
            background-color: #9333ea;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #7e22ce;
        }
        
        .btn-secondary {
            background-color: rgba(75, 85, 99, 0.5);
            color: #d1d5db;
        }
        
        .btn-secondary:hover {
            background-color: rgba(75, 85, 99, 0.7);
        }
        
        /* Form Styles */
        .form-input {
            width: 100%;
            padding: 0.5rem 0.75rem;
            background-color: rgba(31, 41, 55, 0.5);
            color: #d1d5db;
            border: 1px solid #4b5563;
            border-radius: 0.375rem;
            outline: none;
            transition: border-color 0.2s;
        }
        
        .form-input:focus {
            border-color: #9333ea;
        }
        
        /* Card Styles */
        .card {
            background-color: rgba(31, 41, 55, 0.5);
            border: 1px solid #4b5563;
            border-radius: 0.5rem;
            transition: all 0.3s;
        }
        
        .card:hover {
            border-color: #9333ea;
        }
        
        /* Toggle Switch */
        .toggle-container {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        
        .toggle-switch {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #374151;
            transition: .4s;
            border-radius: 34px;
        }
        
        .toggle-switch:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .toggle-switch {
            background-color: #9333ea;
        }
        
        input:checked + .toggle-switch:before {
            transform: translateX(26px);
        }
        
        /* Animation */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Add styles to improve file uploader appearance */
        .upload-container {
            transition: all 0.3s ease;
        }
        
        .upload-container:hover {
            border-color: #a855f7;
        }
        
        .upload-container.drag-active {
            border-color: #9333ea;
            background-color: rgba(147, 51, 234, 0.1);
        }
        
        /* Improve payment section */
        .payment-option {
            transition: all 0.3s ease;
        }
        
        .payment-option:hover {
            border-color: #9333ea;
        }
        
        .payment-option.selected {
            border-color: #9333ea;
            background-color: rgba(147, 51, 234, 0.1);
        }
        
        /* Add animation for successful upload */
        @keyframes uploadSuccess {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .upload-success {
            animation: uploadSuccess 0.5s ease;
        }
    </style>
</head>
<body class="bg-gray-900 min-h-screen">
    <!-- Navigation -->
    <nav class="glass-effect floating-navbar">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <a href="../index.html" class="flex items-center space-x-2">
                        <img src="../public/images/INFINITY GOLD LOGO 24.png" alt="Infinity 2025 Logo" class="h-8 w-auto animate-float">
                        <span class="text-xl font-bold gradient-text">Infinity 2025</span>
                    </a>
                </div>
                <div class="hidden md:flex space-x-8">
                    <a href="../index.html#about" class="text-gray-300 hover:text-purple-400 transition-colors">About</a>
                    <a href="cultural.html" class="text-gray-300 hover:text-purple-400 transition-colors">Cultural</a>
                    <a href="tech.html" class="text-gray-300 hover:text-purple-400 transition-colors">Tech</a>
                    <a href="contact.html" class="text-gray-300 hover:text-purple-400 transition-colors">Contact</a>
                    <a href="register.html" class="text-purple-400 bg-purple-600 text-white px-4 py-2 rounded-md hover:bg-purple-700 transition-colors">Register</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section with Events List -->
    <div class="pt-24 pb-12">
        <div class="max-w-7xl mx-auto px-4">
            <div class="text-center">
                <h1 class="text-5xl font-bold gradient-text mb-4">Event Registration</h1>
                <p class="text-xl text-gray-300 mb-2">INFINITY-2K25 | Faculty of Engineering and Technology, Jain (Deemed-to-be University), Bangalore</p>
                <p class="text-sm text-yellow-400 mb-2">Note: You can only register for events from one category (Technical OR Cultural) in a single transaction</p>
                <p class="text-sm text-purple-300 mb-8">⏰ Registrations open until March 26th, 2025</p>
            
                <div class="flex justify-center gap-4 mb-12">
                    <button id="showTechEvents" class="btn btn-primary">
                        <i class="fas fa-microchip mr-2"></i>Tech Events
                    </button>
                    <button id="showCulturalEvents" class="btn btn-secondary">
                        <i class="fas fa-music mr-2"></i>Cultural Events
                    </button>
                </div>
                
                <!-- Event Lists -->
                <div id="techEventList" class="glass-effect p-6 rounded-lg mb-8">
                    <h2 class="text-2xl font-bold text-white mb-6">Technical Events</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <div class="p-4 border border-gray-700 rounded-lg">
                            <h3 class="text-lg font-medium text-purple-400">PITCH4SUSTAIN</h3>
                            <p class="text-gray-300 text-sm">Sustainability Hackathon</p>
                            <p class="text-gray-400 text-sm mt-1">Fee: ₹500 | Team: 1-5 members</p>
                        </div>
                        <div class="p-4 border border-gray-700 rounded-lg">
                            <h3 class="text-lg font-medium text-purple-400">CTRL+Z</h3>
                            <p class="text-gray-300 text-sm">Debug and rearrange scrambled code</p>
                            <p class="text-gray-400 text-sm mt-1">Fee: ₹200 | Team: 3-4 members</p>
                        </div>
                        <div class="p-4 border border-gray-700 rounded-lg">
                            <h3 class="text-lg font-medium text-purple-400">SYNTAX SCRAMBLE</h3>
                            <p class="text-gray-300 text-sm">Blind coding and debugging challenge</p>
                            <p class="text-gray-400 text-sm mt-1">Fee: ₹150 | Individual</p>
                        </div>
                        <div class="p-4 border border-gray-700 rounded-lg">
                            <h3 class="text-lg font-medium text-purple-400">PHANTOM HUNT</h3>
                            <p class="text-gray-300 text-sm">Cybersecurity challenge with CTF</p>
                            <p class="text-gray-400 text-sm mt-1">Fee: ₹500 | Team: 4-5 members</p>
                        </div>
                        <div class="p-4 border border-gray-700 rounded-lg">
                            <h3 class="text-lg font-medium text-purple-400">INNOVATHON</h3>
                            <p class="text-gray-300 text-sm">Innovation-based hackathon</p>
                            <p class="text-gray-400 text-sm mt-1">Fee: ₹300 | Team: 3-5 members</p>
                        </div>
                        <div class="p-4 border border-gray-700 rounded-lg">
                            <h3 class="text-lg font-medium text-purple-400">MODEL BLITZ</h3>
                            <p class="text-gray-300 text-sm">3D model design competition</p>
                            <p class="text-gray-400 text-sm mt-1">Fee: ₹250 | Individual</p>
                        </div>
                        <div class="p-4 border border-gray-700 rounded-lg">
                            <h3 class="text-lg font-medium text-purple-400">DRONEXTREME</h3>
                            <p class="text-gray-300 text-sm">Drone payload deployment challenge</p>
                            <p class="text-gray-400 text-sm mt-1">Fee: ₹600 | Team: 2-3 members</p>
                        </div>
                    </div>
                </div>
                
                <div id="culturalEventList" class="glass-effect p-6 rounded-lg mb-8 hidden">
                    <h2 class="text-2xl font-bold text-white mb-6">Cultural Events</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <div class="p-4 border border-gray-700 rounded-lg">
                            <h3 class="text-lg font-medium text-purple-400">STEP SYNC</h3>
                            <p class="text-gray-300 text-sm">Solo dance competition</p>
                            <p class="text-gray-400 text-sm mt-1">Fee: ₹500 | Individual</p>
                        </div>
                        <div class="p-4 border border-gray-700 rounded-lg">
                            <h3 class="text-lg font-medium text-purple-400">NRITYA VEDIKA</h3>
                            <p class="text-gray-300 text-sm">Group dance competition</p>
                            <p class="text-gray-400 text-sm mt-1">Fee: ₹800 | Team: 6-15 members</p>
                        </div>
                        <div class="p-4 border border-gray-700 rounded-lg">
                            <h3 class="text-lg font-medium text-purple-400">ECHOES & STRINGS</h3>
                            <p class="text-gray-300 text-sm">Solo singing competition</p>
                            <p class="text-gray-400 text-sm mt-1">Fee: ₹299 | Individual</p>
                        </div>
                        <div class="p-4 border border-gray-700 rounded-lg">
                            <h3 class="text-lg font-medium text-purple-400">RESONANCE</h3>
                            <p class="text-gray-300 text-sm">Music competition (duet and group)</p>
                            <p class="text-gray-400 text-sm mt-1">Fee: ₹399-₹699 | Team: 2+ members</p>
                        </div>
                        <div class="p-4 border border-gray-700 rounded-lg">
                            <h3 class="text-lg font-medium text-purple-400">COSMIC DRIFT</h3>
                            <p class="text-gray-300 text-sm">Sci-Fi themed fashion show</p>
                            <p class="text-gray-400 text-sm mt-1">Fee: ₹2500 | Team: 10-14 members</p>
                        </div>
                        <div class="p-4 border border-gray-700 rounded-lg">
                            <h3 class="text-lg font-medium text-purple-400">EKPHRASTIC POETRY</h3>
                            <p class="text-gray-300 text-sm">Poetry writing based on artwork</p>
                            <p class="text-gray-400 text-sm mt-1">Fee: ₹199 | Individual</p>
                        </div>
                        <div class="p-4 border border-gray-700 rounded-lg">
                            <h3 class="text-lg font-medium text-purple-400">TALE REWIND</h3>
                            <p class="text-gray-300 text-sm">Story writing competition</p>
                            <p class="text-gray-400 text-sm mt-1">Fee: ₹199 | Individual</p>
                        </div>
                        <div class="p-4 border border-gray-700 rounded-lg">
                            <h3 class="text-lg font-medium text-purple-400">JUST A MINUTE</h3>
                            <p class="text-gray-300 text-sm">Speaking challenge</p>
                            <p class="text-gray-400 text-sm mt-1">Fee: ₹199 | Individual</p>
                        </div>
                        <div class="p-4 border border-gray-700 rounded-lg">
                            <h3 class="text-lg font-medium text-purple-400">WAVE YOUR STORY</h3>
                            <p class="text-gray-300 text-sm">Speech recital competition</p>
                            <p class="text-gray-400 text-sm mt-1">Fee: ₹299 | Individual</p>
                        </div>
                        <div class="p-4 border border-gray-700 rounded-lg">
                            <h3 class="text-lg font-medium text-purple-400">SHORT FILM MAKING</h3>
                            <p class="text-gray-300 text-sm">Create and submit short films</p>
                            <p class="text-gray-400 text-sm mt-1">Fee: ₹599 | Team: 3-8 members</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Registration Form -->
    <div class="max-w-2xl mx-auto px-4 py-8">
        <div class="text-center mb-8">
            <h2 class="text-3xl font-bold gradient-text mb-4">Register Now</h2>
            <p class="text-gray-300">Complete the form below to participate in the events</p>
        </div>
        
        <form id="registrationForm" class="glass-effect rounded-lg p-8 space-y-6">
            <!-- Progress Steps -->
            <div class="flex justify-between mb-8">
                <div class="flex items-center">
                    <div class="w-8 h-8 rounded-full bg-purple-600 flex items-center justify-center text-white">1</div>
                    <span class="ml-2 text-sm text-gray-300">Category & Events</span>
                </div>
                <div class="flex items-center">
                    <div class="w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center text-gray-300">2</div>
                    <span class="ml-2 text-sm text-gray-300">Personal Info</span>
                </div>
                <div class="flex items-center">
                    <div class="w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center text-gray-300">3</div>
                    <span class="ml-2 text-sm text-gray-300">Team Details</span>
                </div>
                <div class="flex items-center">
                    <div class="w-8 h-8 rounded-full bg-gray-700 flex items-center justify-center text-gray-300">4</div>
                    <span class="ml-2 text-sm text-gray-300">Payment</span>
                </div>
            </div>

            <!-- Step 1: Category & Events Selection -->
            <div id="step1" class="space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-2">
                        <i class="fas fa-tags mr-2"></i>Select Category
                    </label>
                    <div class="grid grid-cols-2 gap-4">
                        <button type="button" class="category-btn btn btn-secondary" data-category="tech">
                            <i class="fas fa-microchip mr-2"></i>Technical Events
                        </button>
                        <button type="button" class="category-btn btn btn-secondary" data-category="cultural">
                            <i class="fas fa-palette mr-2"></i>Cultural Events
                        </button>
                    </div>
                </div>

                <div id="eventsList" class="hidden">
                    <label class="block text-sm font-medium text-gray-300 mb-2">
                        <i class="fas fa-calendar-check mr-2"></i>Select Events
                    </label>
                    <div class="p-4 bg-gray-800/50 rounded-lg mb-4">
                        <p class="text-yellow-400"><i class="fas fa-info-circle mr-2"></i>Click on any event card to select it or toggle the switch on the right. Selected events will show a purple toggle.</p>
                    </div>
                    <div class="space-y-4" id="eventsContainer">
                        <!-- Events will be dynamically populated here -->
                    </div>
                </div>
            </div>

            <!-- Step 2: Personal Information -->
            <div id="step2" class="hidden space-y-6">
                <div>
                    <label for="name" class="block text-sm font-medium text-gray-300 mb-2">
                        <i class="fas fa-user mr-2"></i>Full Name
                    </label>
                    <input type="text" id="name" name="name" required
                        class="form-input"
                        placeholder="Enter your full name">
                </div>

                <div>
                    <label for="email" class="block text-sm font-medium text-gray-300 mb-2">
                        <i class="fas fa-envelope mr-2"></i>Email Address
                    </label>
                    <input type="email" id="email" name="email" required
                        class="form-input"
                        placeholder="Enter your email address">
                </div>

                <div>
                    <label for="university" class="block text-sm font-medium text-gray-300 mb-2">
                        <i class="fas fa-university mr-2"></i>University
                    </label>
                    <input type="text" id="university" name="university" required
                        class="form-input"
                        placeholder="Enter your university name">
                </div>

                <div>
                    <label for="phone" class="block text-sm font-medium text-gray-300 mb-2">
                        <i class="fas fa-phone mr-2"></i>Phone Number
                    </label>
                    <input type="tel" id="phone" name="phone" required
                        class="form-input"
                        placeholder="Enter your phone number">
                </div>
            </div>

            <!-- Step 3: Team Information -->
            <div id="step3" class="hidden space-y-6">
                <div>
                    <label for="teamName" class="block text-sm font-medium text-gray-300 mb-2">
                        <i class="fas fa-users mr-2"></i>Team Name
                    </label>
                    <input type="text" id="teamName" name="teamName"
                        class="form-input"
                        placeholder="Enter your team name">
                </div>

                <div>
                    <label for="teamMembers" class="block text-sm font-medium text-gray-300 mb-2">
                        <i class="fas fa-user-friends mr-2"></i>Team Members
                    </label>
                    <div id="teamMembersContainer" class="space-y-4">
                        <div class="flex items-center space-x-4">
                            <input type="text" name="teamMembers[]" required
                                class="form-input flex-1"
                                placeholder="Enter team member name">
                            <button type="button" class="btn btn-secondary" onclick="addTeamMember()">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Step 4: Payment -->
            <div id="step4" class="hidden space-y-6">
                <div>
                    <label class="block text-sm font-medium text-gray-300 mb-2">
                        <i class="fas fa-money-bill-wave mr-2"></i>Payment Method
                    </label>
                    <div class="grid grid-cols-2 gap-4">
                        <button type="button" class="payment-btn btn btn-secondary" data-method="qr">
                            <i class="fas fa-qrcode mr-2"></i>Pay via QR Code
                        </button>
                    </div>
                </div>

                <div id="qrPayment" class="hidden fade-in">
                    <div class="text-center mb-4" id="techQrCode">
                        <img src="../public/images/IMG_1787.PNG" alt="Tech Events QR Code" class="mx-auto w-64 h-64 border-2 border-purple-500 rounded-lg">
                        <p class="text-gray-300 mt-2"><strong>Technical Events Payment</strong></p>
                        <div class="bg-gray-800/60 p-3 rounded-lg mt-2 mx-auto max-w-md">
                            <p class="text-gray-200 mt-2">1. Scan this QR code using any UPI payment app</p>
                            <p class="text-gray-200 mt-1">2. Enter the exact amount: <span class="text-yellow-400" id="techTotalFee">₹0</span></p>
                            <p class="text-gray-200 mt-1">3. In payment description, include: <span class="font-mono text-purple-400">INFINITY-TECH-[Your Name]</span></p>
                            <p class="text-gray-200 mt-1">4. Take a screenshot of payment confirmation</p>
                            <p class="text-gray-200 mt-1">5. Upload the screenshot below</p>
                        </div>
                    </div>
                    <div class="text-center mb-4 hidden" id="culturalQrCode">
                        <img src="../public/images/GooglePay_QR (2).png" alt="Cultural Events QR Code" class="mx-auto w-64 h-64 border-2 border-purple-500 rounded-lg">
                        <p class="text-gray-300 mt-2"><strong>Cultural Events Payment</strong></p>
                        <div class="bg-gray-800/60 p-3 rounded-lg mt-2 mx-auto max-w-md">
                            <p class="text-gray-200 mt-2">1. Scan this QR code using any UPI payment app</p>
                            <p class="text-gray-200 mt-1">2. Enter the exact amount: <span class="text-yellow-400" id="culturalTotalFee">₹0</span></p>
                            <p class="text-gray-200 mt-1">3. In payment description, include: <span class="font-mono text-purple-400">INFINITY-CULTURAL-[Your Name]</span></p>
                            <p class="text-gray-200 mt-1">4. Take a screenshot of payment confirmation</p>
                            <p class="text-gray-200 mt-1">5. Upload the screenshot below</p>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-300 mb-2">Upload Payment Screenshot:</label>
                        <div id="paymentProofContainer" class="mb-2">
                            <!-- FileUpload component will render here -->
                        </div>
                        <input type="file" id="paymentProof" name="paymentProof" accept="image/*" class="hidden">
                        <p class="text-sm text-gray-400">
                            <i class="fas fa-info-circle mr-1"></i> 
                            Please ensure the transaction ID is clearly visible in the screenshot
                        </p>
                    </div>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="flex justify-between pt-6">
                <button type="button" id="prevBtn" class="btn btn-secondary hidden">
                    <i class="fas fa-arrow-left mr-2"></i>Previous
                </button>
                <button type="button" id="nextBtn" class="btn btn-primary ml-auto">
                    Next <i class="fas fa-arrow-right ml-2"></i>
                </button>
                <button type="submit" id="submitBtn" class="btn btn-primary hidden">
                    <i class="fas fa-paper-plane mr-2"></i>Submit Registration
                </button>
            </div>
        </form>

        <!-- Success Message -->
        <div id="successMessage" class="hidden mt-4 p-4 bg-green-900/50 text-green-200 rounded-lg fade-in">
            <div class="flex items-center">
                <i class="fas fa-check-circle mr-2"></i>
                Registration Successful! We'll contact you soon with further details.
            </div>
        </div>

        <!-- Error Message -->
        <div id="errorMessage" class="hidden mt-4 p-4 bg-red-900/50 text-red-200 rounded-lg fade-in">
            <div class="flex items-center">
                <i class="fas fa-exclamation-circle mr-2"></i>
                An error occurred. Please try again.
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-900 border-t border-gray-800 py-8 mt-12">
        <div class="max-w-7xl mx-auto px-4">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8 mb-8">
                <div class="text-center">
                    <a href="../index.html" class="inline-block py-2 px-4 rounded-lg glass-effect text-white hover:text-purple-400 transition-colors w-full">
                        <i class="fas fa-home mr-2"></i>Home
                    </a>
                </div>
                <div class="text-center">
                    <a href="tech.html" class="inline-block py-2 px-4 rounded-lg glass-effect text-white hover:text-purple-400 transition-colors w-full">
                        <i class="fas fa-microchip mr-2"></i>Tech Events
                    </a>
                </div>
                <div class="text-center">
                    <a href="cultural.html" class="inline-block py-2 px-4 rounded-lg glass-effect text-white hover:text-purple-400 transition-colors w-full">
                        <i class="fas fa-music mr-2"></i>Cultural Events
                    </a>
                </div>
                <div class="text-center">
                    <a href="register.html" class="inline-block py-2 px-4 rounded-lg glass-effect text-white hover:text-purple-400 transition-colors w-full">
                        <i class="fas fa-user-plus mr-2"></i>Register
                    </a>
                </div>
            </div>
            
            <hr class="border-gray-800 my-6">
            
            <div class="flex justify-center space-x-6 mb-6">
                <a href="#" class="text-gray-400 hover:text-purple-400 transition-colors">
                    <i class="fab fa-facebook-f text-xl"></i>
                </a>
                <a href="#" class="text-gray-400 hover:text-purple-400 transition-colors">
                    <i class="fab fa-twitter text-xl"></i>
                </a>
                <a href="#" class="text-gray-400 hover:text-purple-400 transition-colors">
                    <i class="fab fa-instagram text-xl"></i>
                </a>
                <a href="#" class="text-gray-400 hover:text-purple-400 transition-colors">
                    <i class="fab fa-linkedin-in text-xl"></i>
                </a>
                <a href="#" class="text-gray-400 hover:text-purple-400 transition-colors">
                    <i class="fab fa-youtube text-xl"></i>
                </a>
            </div>
            
            <p class="text-center text-gray-400 mb-2">&copy; 2025 Krithik R. All rights reserved. | Designed & Developed by <a href="https://krithikr007.github.io/krithik-r/portfolio/index.html" target="_blank" class="text-purple-400 hover:text-purple-300">Krithik R.</a></p>
            <p class="text-center text-gray-500 mb-2">Organized by Faculty of Engineering and Technology, Jain (Deemed-to-be University), Bangalore</p>
            <p class="text-center text-gray-400 mb-2">Contact: Technical Events - Dhrub Kumar Jha (+91 8296019911) | Cultural Events - Rohan (+91 9353074448)</p>
            <p class="text-center text-gray-500 text-sm">
                <a href="https://github.com/KRITHIKR007" target="_blank" class="text-gray-500 hover:text-purple-400 transition-colors mx-2">GitHub</a> | 
                <a href="https://www.linkedin.com/in/krithik-r124/" target="_blank" class="text-gray-500 hover:text-purple-400 transition-colors mx-2">LinkedIn</a> | 
                <span class="text-gray-500 mx-2">Discord: krithik.r007</span>
            </p>
        </div>
    </footer>

    <!-- Form Scripting -->
    <script type="module">
        import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm';
        import { FileUpload } from '../public/scripts/components/file-upload.js';
        
        // Initialize Supabase client
        const supabaseUrl = 'https://ceickbodqhwfhcpabfdq.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNlaWNrYm9kcWh3ZmhjcGFiZmRxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDIzMzU2MTgsImV4cCI6MjA1NzkxMTYxOH0.ZyTG1FkQzjQ0CySlyvkQEYPHWBbZJd--vsB_IqILuo8';
        const supabase = createClient(supabaseUrl, supabaseKey);
        
        // Define database tables and constants
        const TABLES = {
            REGISTRATIONS: 'registrations',
            EVENTS: 'events',
            PAYMENTS: 'payments',
            PARTICIPANTS: 'participants',
            STORAGE: {
                PAYMENT_PROOFS: 'payment_proofs'
            }
        };
        
        // Event data from our database - this will be dynamically loaded in production
        const events = {
            tech: [
                {
                    id: 'pitch4sustain',
                    name: 'PITCH4SUSTAIN',
                    description: 'Sustainability Hackathon',
                    fee: 500,
                    teamSize: 5,
                    date: 'March 27, 2025'
                },
                {
                    id: 'ctrl-z',
                    name: 'CTRL+Z',
                    description: 'Debug and rearrange scrambled code',
                    fee: 200,
                    teamSize: 4,
                    date: 'March 27, 2025'
                },
                {
                    id: 'syntax-scramble',
                    name: 'SYNTAX SCRAMBLE',
                    description: 'Blind coding and debugging challenge',
                    fee: 150,
                    teamSize: 1,
                    date: 'March 27, 2025'
                },
                {
                    id: 'phantom-hunt',
                    name: 'PHANTOM HUNT',
                    description: 'Cybersecurity challenge with CTF',
                    fee: 500,
                    teamSize: 5,
                    date: 'March 28, 2025'
                },
                {
                    id: 'innovathon',
                    name: 'INNOVATHON',
                    description: 'Innovation-based hackathon',
                    fee: 300,
                    teamSize: 5,
                    date: 'March 28, 2025'
                },
                {
                    id: 'model-blitz',
                    name: 'MODEL BLITZ',
                    description: '3D model design competition',
                    fee: 250,
                    teamSize: 1,
                    date: 'March 28, 2025'
                },
                {
                    id: 'drone-xtreme',
                    name: 'DRONEXTREME',
                    description: 'Drone payload deployment challenge',
                    fee: 600,
                    teamSize: 3,
                    date: 'March 28, 2025'
                }
            ],
            cultural: [
                {
                    id: 'step-sync',
                    name: 'STEP SYNC',
                    description: 'Solo dance competition',
                    fee: 500,
                    teamSize: 1,
                    date: 'March 27, 2025'
                },
                {
                    id: 'nritya-vedika',
                    name: 'NRITYA VEDIKA',
                    description: 'Group dance competition',
                    fee: 800,
                    teamSize: 15,
                    date: 'March 27, 2025'
                },
                {
                    id: 'echoes-strings',
                    name: 'ECHOES & STRINGS',
                    description: 'Solo singing competition',
                    fee: 299,
                    teamSize: 1,
                    date: 'March 27, 2025'
                },
                {
                    id: 'resonance',
                    name: 'RESONANCE',
                    description: 'Music competition (duet and group)',
                    fee: 699,
                    teamSize: 8,
                    date: 'March 27, 2025'
                },
                {
                    id: 'cosmic-drift',
                    name: 'COSMIC DRIFT',
                    description: 'Sci-Fi themed fashion show',
                    fee: 2500,
                    teamSize: 14,
                    date: 'March 28, 2025'
                },
                {
                    id: 'ekphrastic-poetry',
                    name: 'EKPHRASTIC POETRY',
                    description: 'Poetry writing based on artwork',
                    fee: 199,
                    teamSize: 1,
                    date: 'March 28, 2025'
                },
                {
                    id: 'tale-rewind',
                    name: 'TALE REWIND',
                    description: 'Story writing competition',
                    fee: 199,
                    teamSize: 1,
                    date: 'March 28, 2025'
                },
                {
                    id: 'just-a-minute',
                    name: 'JUST A MINUTE',
                    description: 'Speaking challenge',
                    fee: 199,
                    teamSize: 1,
                    date: 'March 28, 2025'
                },
                {
                    id: 'wave-your-story',
                    name: 'WAVE YOUR STORY',
                    description: 'Speech recital competition',
                    fee: 299,
                    teamSize: 1,
                    date: 'March 28, 2025'
                },
                {
                    id: 'short-film-making',
                    name: 'SHORT FILM MAKING',
                    description: 'Create and submit short films',
                    fee: 599,
                    teamSize: 8,
                    date: 'March 28, 2025'
                }
            ]
        };
        
        // Form state
        let currentStep = 1;
        let selectedCategory = null;
        let selectedEvents = new Set();
        let totalFee = 0;
        let paymentMethod = '';
        
        // DOM Elements
        const form = document.getElementById('registrationForm');
        const steps = document.querySelectorAll('[id^="step"]');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const submitBtn = document.getElementById('submitBtn');
        const teamMembersContainer = document.getElementById('teamMembersContainer');
        
        // Add Team Member function
        window.addTeamMember = function() {
            const memberDiv = document.createElement('div');
            memberDiv.className = 'flex items-center space-x-4';
            memberDiv.innerHTML = `
                <input type="text" name="teamMembers[]" required
                    class="form-input flex-1"
                    placeholder="Enter team member name">
                <button type="button" class="btn btn-secondary" onclick="this.parentElement.remove()">
                    <i class="fas fa-minus"></i>
                </button>
            `;
            teamMembersContainer.appendChild(memberDiv);
        };
        
        // Category selection
        document.querySelectorAll('.category-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                selectedCategory = btn.dataset.category;
                
                // Update UI to show selected category
                document.querySelectorAll('.category-btn').forEach(b => {
                    b.classList.remove('btn-primary');
                    b.classList.add('btn-secondary');
                });
                btn.classList.remove('btn-secondary');
                btn.classList.add('btn-primary');
                
                // Show events for the selected category
                document.getElementById('techEventList').classList.toggle('hidden', selectedCategory !== 'tech');
                document.getElementById('culturalEventList').classList.toggle('hidden', selectedCategory !== 'cultural');
                
                // Show events list
                document.getElementById('eventsList').classList.remove('hidden');
                
                // Populate events based on selected category
                populateEvents(selectedCategory);
                
                // Update QR code visibility based on selected category
                updateQrCodeVisibility();
            });
        });
        
        // Function to populate events based on category
        function populateEvents(category) {
            const eventsContainer = document.getElementById('eventsContainer');
            eventsContainer.innerHTML = '';
            
            if (!events[category]) return;
            
            events[category].forEach(event => {
                const eventCard = document.createElement('div');
                eventCard.className = 'flex justify-between items-center p-4 bg-gray-800/50 rounded-lg mb-3 cursor-pointer hover:border hover:border-purple-500 transition-all';
                eventCard.dataset.id = event.id;
                
                eventCard.innerHTML = `
                    <div class="flex-1">
                        <h3 class="text-lg font-medium text-purple-400">${event.name}</h3>
                        <p class="text-sm text-gray-300">${event.description}</p>
                        <p class="text-xs text-gray-400 mt-1">Fee: ₹${event.fee} | ${event.teamSize > 1 ? event.teamSize + ' members' : 'Individual'} | ${event.date}</p>
                    </div>
                    <div class="toggle-container">
                        <input type="checkbox" id="${event.id}" class="sr-only event-checkbox" data-id="${event.id}" data-fee="${event.fee}" data-team-size="${event.teamSize}">
                        <label for="${event.id}" class="toggle-switch"></label>
                    </div>
                `;
                
                eventsContainer.appendChild(eventCard);
                
                // Add click event to the entire card
                eventCard.addEventListener('click', function() {
                    const checkbox = this.querySelector('input[type="checkbox"]');
                    checkbox.checked = !checkbox.checked;
                    
                    // Trigger change event
                    const changeEvent = new Event('change');
                    checkbox.dispatchEvent(changeEvent);
                    
                    // Update UI
                    this.classList.toggle('border-purple-500', checkbox.checked);
                    this.classList.toggle('border', checkbox.checked);
                });
            });
            
            // Add event listeners to checkboxes
            document.querySelectorAll('.event-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const eventId = this.dataset.id;
                    const fee = parseInt(this.dataset.fee);
                    const teamSize = parseInt(this.dataset.teamSize);
                    
                    if (this.checked) {
                        selectedEvents.add(eventId);
                        totalFee += fee;
                    } else {
                        selectedEvents.delete(eventId);
                        totalFee -= fee;
                    }
                    
                    // Update the fee display
                    updateQrCodeVisibility();
                });
            });
        }
        
        // Update QR code visibility based on selected category and payment method
        function updateQrCodeVisibility() {
            const techQrCode = document.getElementById('techQrCode');
            const culturalQrCode = document.getElementById('culturalQrCode');
            
            if (techQrCode && culturalQrCode) {
                techQrCode.classList.toggle('hidden', selectedCategory !== 'tech' || paymentMethod !== 'qr');
                culturalQrCode.classList.toggle('hidden', selectedCategory !== 'cultural' || paymentMethod !== 'qr');
                
                // Update total fee display
                if (selectedCategory === 'tech') {
                    const techFeeElement = document.getElementById('techTotalFee');
                    if (techFeeElement) techFeeElement.textContent = `₹${totalFee}`;
                } else if (selectedCategory === 'cultural') {
                    const culturalFeeElement = document.getElementById('culturalTotalFee');
                    if (culturalFeeElement) culturalFeeElement.textContent = `₹${totalFee}`;
                }
            }
        }

        // Update team section based on team size
        function updateTeamSection(teamSize) {
            // Will be used when navigating to team section
            const teamNameField = document.getElementById('teamName');
            
            if (teamSize > 1) {
                teamNameField.setAttribute('required', 'required');
                teamMembersContainer.innerHTML = '';
                
                // Add initial team member field
                const initialField = document.createElement('div');
                initialField.className = 'flex items-center space-x-4';
                initialField.innerHTML = `
                    <input type="text" name="teamMembers[]" required
                        class="form-input flex-1"
                        placeholder="Enter team member name">
                    <button type="button" class="btn btn-secondary" onclick="addTeamMember()">
                        <i class="fas fa-plus"></i>
                    </button>
                `;
                teamMembersContainer.appendChild(initialField);
            } else {
                teamNameField.removeAttribute('required');
                teamMembersContainer.innerHTML = '<p class="text-gray-400">This is an individual event. No team members required.</p>';
            }
        }

        // Update payment method buttons to call updateQrCodeVisibility when QR payment is selected
        document.querySelectorAll('.payment-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const method = btn.dataset.method;
                paymentMethod = method; // Store the selected payment method
                console.log('Payment method selected:', method);
                
                // Reset all buttons
                document.querySelectorAll('.payment-btn').forEach(b => {
                    b.classList.remove('btn-primary');
                    b.classList.add('btn-secondary');
                });
                
                // Highlight selected button
                btn.classList.remove('btn-secondary');
                btn.classList.add('btn-primary');
                
                // Show appropriate payment section
                document.getElementById('qrPayment').classList.toggle('hidden', method !== 'qr');
                
                // Update QR code visibility when QR payment method is selected
                if (method === 'qr') {
                    updateQrCodeVisibility();
                }
                
                // Update required attribute for payment proof
                const paymentProof = document.getElementById('paymentProof');
                if (paymentProof) {
                    paymentProof.required = method === 'qr';
                }
            });
        });
        
        // Form navigation
        function showStep(step) {
            // Hide all steps
            steps.forEach(s => s.classList.add('hidden'));
            
            // Show current step
            document.getElementById(`step${step}`).classList.remove('hidden');
            
            // Update navigation buttons
            prevBtn.classList.toggle('hidden', step === 1);
            nextBtn.classList.toggle('hidden', step === 4);
            submitBtn.classList.toggle('hidden', step !== 4);
            
            // Update current step tracker
            currentStep = step;
            
            // Update progress indicators
            const progressSteps = document.querySelectorAll('.w-8.h-8.rounded-full');
            progressSteps.forEach((el, index) => {
                if (index + 1 < step) {
                    el.classList.remove('bg-gray-700', 'bg-purple-600');
                    el.classList.add('bg-green-600');
                    el.innerHTML = '<i class="fas fa-check"></i>';
                } else if (index + 1 === step) {
                    el.classList.remove('bg-gray-700', 'bg-green-600');
                    el.classList.add('bg-purple-600');
                    el.innerHTML = index + 1;
                } else {
                    el.classList.remove('bg-purple-600', 'bg-green-600');
                    el.classList.add('bg-gray-700');
                    el.innerHTML = index + 1;
                }
            });
        }
        
        // Validate current step
        function validateStep(step) {
            if (step === 1) {
                // Check if category is selected
                if (!selectedCategory) {
                    alert('Please select a category (Technical or Cultural)');
                    return false;
                }
                
                // Check if at least one event is selected
                if (selectedEvents.size === 0) {
                    alert('Please select at least one event by clicking on an event card');
                    return false;
                }
                
                // Show selected events for confirmation
                let eventNames = [];
                for (const eventId of selectedEvents) {
                    const event = events[selectedCategory].find(e => e.id === eventId);
                    if (event) {
                        eventNames.push(event.name);
                    }
                }
                
                const confirmMessage = `Selected events: ${eventNames.join(', ')}\nTotal Fee: ₹${totalFee}\n\nProceed to next step?`;
                return confirm(confirmMessage);
            } else if (step === 2) {
                // Validate personal information
                const name = document.getElementById('name').value;
                const email = document.getElementById('email').value;
                const university = document.getElementById('university').value;
                const phone = document.getElementById('phone').value;
                
                if (!name || !email || !university || !phone) {
                    alert('Please fill in all required fields');
                    return false;
                }
                
                return true;
            } else if (step === 3) {
                // If any selected event is team-based, require team name and members
                let teamRequired = false;
                
                for (const eventId of selectedEvents) {
                    const event = events[selectedCategory].find(e => e.id === eventId);
                    if (event && event.teamSize > 1) {
                        teamRequired = true;
                        break;
                    }
                }
                
                if (teamRequired) {
                    const teamName = document.getElementById('teamName').value;
                    const teamMembers = document.querySelectorAll('input[name="teamMembers[]"]');
                    
                    if (!teamName) {
                        alert('Please provide a team name');
                        return false;
                    }
                    
                    for (const member of teamMembers) {
                        if (!member.value) {
                            alert('Please fill in all team member names');
                            return false;
                        }
                    }
                }
                
                return true;
            } else if (step === 4) {
                // Validate payment method
                if (!paymentMethod) {
                    alert('Please select a payment method');
                    return false;
                }
                
                // If QR method chosen, validate payment proof
                if (paymentMethod === 'qr') {
                    const paymentProof = document.getElementById('paymentProof');
                    if (!paymentProof.files || paymentProof.files.length === 0) {
                        alert('Please upload payment proof');
                        return false;
                    }
                }
                
                return true;
            }
            
            return true;
        }
        
        // Next button click
        nextBtn.addEventListener('click', () => {
            if (validateStep(currentStep)) {
                showStep(currentStep + 1);
            }
        });
        
        // Previous button click
        prevBtn.addEventListener('click', () => {
            showStep(currentStep - 1);
        });
        
        // Event selection checkboxes
        document.querySelectorAll('.event-checkbox').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                const eventId = this.dataset.id;
                const fee = parseInt(this.dataset.fee);
                const teamSize = parseInt(this.dataset.teamSize);
                
                if (this.checked) {
                    selectedEvents.add(eventId);
                    totalFee += fee;
                    
                    // If team event selected, update team section
                    if (teamSize > 1) {
                        updateTeamSection(teamSize);
                    }
                } else {
                    selectedEvents.delete(eventId);
                    totalFee -= fee;
                }
                
                // Update the fee display
                updateQrCodeVisibility();
            });
        });
        
        // Initialize file uploader
        document.addEventListener('DOMContentLoaded', function() {
            const paymentProofContainer = document.getElementById('paymentProofContainer');
            const paymentProofInput = document.getElementById('paymentProof');
            
            if (paymentProofContainer && paymentProofInput) {
                const fileUploader = new FileUpload(paymentProofInput, paymentProofContainer, {
                    maxFileSize: 5 * 1024 * 1024, // 5MB
                    acceptedTypes: ['image/jpeg', 'image/png', 'image/jpg', 'image/gif'],
                    showFileName: true,
                    showFileSize: true
                });
                
                // Store the file uploader instance
                window.paymentProofUploader = fileUploader;
            }
        });
        
        // Form submission
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            if (!validateStep(currentStep)) {
                return;
            }
            
            // Disable submit button and show loading state
            submitBtn.disabled = true;
            submitBtn.innerHTML = '<div class="loading mr-2"></div>Submitting...';
            
            try {
                // Get form data
                const name = document.getElementById('name').value;
                const email = document.getElementById('email').value;
                const phone = document.getElementById('phone').value;
                const university = document.getElementById('university').value;
                const teamName = document.getElementById('teamName').value || null;
                
                // Get selected events data
                const selectedEventsData = Array.from(selectedEvents).map(eventId => {
                    const event = events[selectedCategory].find(e => e.id === eventId);
                    return {
                        id: eventId,
                        name: event.name,
                        fee: event.fee
                    };
                });
                
                // Process payment if QR payment selected
                let paymentId = null;
                if (paymentMethod === 'qr') {
                    // Get file from the FileUpload component if available
                    let paymentProofFile = null;
                    
                    if (window.paymentProofUploader) {
                        paymentProofFile = window.paymentProofUploader.getFile();
                    } else {
                        paymentProofFile = document.getElementById('paymentProof').files[0];
                    }
                    
                    if (paymentProofFile) {
                        // Upload payment proof to Supabase storage
                        const filePath = `payment-proofs/${Date.now()}-${paymentProofFile.name.replace(/[^a-zA-Z0-9.]/g, '_')}`;
                        const { data: uploadData, error: uploadError } = await supabase.storage
                            .from('payment_proofs')
                            .upload(filePath, paymentProofFile);
                            
                        if (uploadError) throw uploadError;
                        
                        // Get public URL for the uploaded file
                        const proofUrl = supabase.storage
                            .from('payment_proofs')
                            .getPublicUrl(filePath).data.publicUrl;
                            
                        // Create payment record
                        const { data: paymentData, error: paymentError } = await supabase
                            .from(TABLES.PAYMENTS)
                            .insert([
                                {
                                    amount: totalFee,
                                    currency: 'INR',
                                    status: 'pending',
                                    payment_method: 'qr',
                                    proof_url: proofUrl,
                                    created_at: new Date().toISOString()
                                }
                            ])
                            .select();
                            
                        if (paymentError) throw paymentError;
                        
                        paymentId = paymentData[0].id;
                    }
                }
                
                // Get team members
                const teamMembersInputs = document.querySelectorAll('input[name="teamMembers[]"]');
                const teamMembers = Array.from(teamMembersInputs).map(input => input.value).filter(value => value);
                
                // Create registration record in Supabase
                const { data: registrationData, error: registrationError } = await supabase
                    .from(TABLES.REGISTRATIONS)
                    .insert([
                        {
                            name,
                            email,
                            phone,
                            university,
                            events: Array.from(selectedEvents),
                            event_name: selectedEventsData.map(e => e.name).join(', '),
                            payment_status: paymentMethod === 'qr' ? 'pending' : 'awaiting_payment',
                            payment_id: paymentId,
                            created_at: new Date().toISOString(),
                            team_name: teamName,
                            team_members: JSON.stringify(teamMembers),
                            category: selectedCategory,
                            fee: totalFee
                        }
                    ])
                    .select();
                    
                if (registrationError) throw registrationError;
                
                // Show success message
                document.getElementById('successMessage').classList.remove('hidden');
                form.classList.add('hidden');
                
                // Redirect to confirmation page after 5 seconds
                setTimeout(() => {
                    window.location.href = 'confirmation.html?id=' + registrationData[0].id;
                }, 5000);
                
            } catch (error) {
                console.error('Registration error:', error);
                
                // Show error message
                document.getElementById('errorMessage').textContent = 'Registration error: ' + error.message;
                document.getElementById('errorMessage').classList.remove('hidden');
                
                // Enable submit button
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<i class="fas fa-paper-plane mr-2"></i>Submit Registration';
            }
        });
        
        // Initialize the form
        showStep(1);
    </script>
</body>
</html>